<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>g07report</title>
<!-- 2016-11-04 Fri 14:59 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Justin Barclay" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">g07report</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Services and Configuration</a>
<ul>
<li><a href="#sec-1-1">1.1. Part 1:</a></li>
<li><a href="#sec-1-2">1.2. Reasoning:</a></li>
<li><a href="#sec-1-3">1.3. Part 2</a>
<ul>
<li><a href="#sec-1-3-1">1.3.1. How did you select the passwords for the user accounts on Linux and Windows</a></li>
<li><a href="#sec-1-3-2">1.3.2. Compare and contrast how the authentication in the web server works, ftp server, and in the tftp server</a></li>
<li><a href="#sec-1-3-3">1.3.3. Compare &amp; Contrast:</a></li>
</ul>
</li>
<li><a href="#sec-1-4">1.4. Part 3</a></li>
<li><a href="#sec-1-5">1.5. IP Table rules:</a></li>
<li><a href="#sec-1-6">1.6. Delegation of duties</a></li>
<li><a href="#sec-1-7">1.7. Difficulties Encountered</a></li>
<li><a href="#sec-1-8">1.8. Resources:</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Services and Configuration</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Part 1:</h3>
<div class="outline-text-3" id="text-1-1">
<p>
<b>Linux root password:</b>
Qni@rjeIy4NwI6nLHmo67Wy*yDUOuY4$ynyRmFoJ%6fy3q$m%TwqOTeffo*W40vh
<b>Linux student password:</b>
In&amp;JRDhntDg5gnTlx7RKSxA8I4!*yey60fOyG4q7uRmRJ@8qi1g4ZHyEd3jQEaXC
<b>Linux professor password:</b>
bzoXuICOJBcGupZjKcySdp74pxO6Npyfv5XTQQv9x3pq7Yr75
<b>Windows Student password:</b>
#Are there other windows account passwords, and is windows admin the same as Linux?
<b>Windows Alice password:</b>
$6zv7yMX4!O55j$z@Yy1h2614o37AaE7r1wY9eH6M102X7184pm!qnzJFB2f06oM
<b>Windows Bob password:</b>
UgG822a2y5f9K7i2sIGlPNa118*99qWqFY0!3<sup>GTnPprWTq0dA</sup><sup>13e9kH5A0E901</sup>
<b>NOTE:</b> please contact us if you use lastpass, and we can share the passwords
with you to make life a little easier (because these are truly sadistic
passwords) without the use of a password manager
</p>
</div>
</div>
<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Reasoning:</h3>
<div class="outline-text-3" id="text-1-2">
<ul class="org-ul">
<li>Passwords are randomly generated using LastPass (very reputable password
service) to prevent dictionary/rainbow attacks and ensure integrity of random
generation
</li>
<li>We wanted to ensure that it was impossible to brute force a password
<ul class="org-ul">
<li>It takes 16.69 million trillion trillion trillion trillion trillion
</li>
</ul>
<p>
trillion trillion centuries to exhaustively search this password space
(Assuming one hundred trillion guesses per second)
</p>
</li>
<li>The ease of use, and proven security benefits of using a password manager
and randomly generated passwords makes the use of user created passwords
inexcuseable
</li>
<li>If we were implimenting this assignment in the real world, these ports
would be open to online brute force/dictionary/rainbow attacks (excepting the use
of something like Fail2Ban), so it is a neccessity to have an extremely
secure password to prevent unauthorized access to the server(s)
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> Part 2</h3>
<div class="outline-text-3" id="text-1-3">
</div><div id="outline-container-sec-1-3-1" class="outline-4">
<h4 id="sec-1-3-1"><span class="section-number-4">1.3.1</span> How did you select the passwords for the user accounts on Linux and Windows</h4>
<div class="outline-text-4" id="text-1-3-1">
<ul class="org-ul">
<li>Passwords are randomly generated using LastPass (very reputable password
service) to prevent dictionary/rainbow attacks and ensure integrity of random
generation
</li>
<li>We wanted to ensure that it was impossible to brute force a password
<ul class="org-ul">
<li>It takes 16.69 million trillion trillion trillion trillion trillion
</li>
</ul>
<p>
trillion trillion centuries to exhaustively search this password space
(Assuming one hundred trillion guesses per second)
</p>
</li>
<li>The ease of use, and proven security benefits of using a password manager
and randomly generated passwords makes the use of user created passwords
inexcuseable, as compromising a user account can give an attacker a
foothold to gain higher access privileges on the server 
</li>
<li>If we were implimenting this assignment in the real world, these ports
would be open to online brute force/dictionary/rainbow attacks (excepting the use
of something like Fail2Ban), so it is a neccessity to have an extremely
secure password to prevent unauthorized access to the server(s)
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-3-2" class="outline-4">
<h4 id="sec-1-3-2"><span class="section-number-4">1.3.2</span> Compare and contrast how the authentication in the web server works, ftp server, and in the tftp server</h4>
<div class="outline-text-4" id="text-1-3-2">
</div><ol class="org-ol"><li><a id="sec-1-3-2-1" name="sec-1-3-2-1"></a>Web Server:<br  /><div class="outline-text-5" id="text-1-3-2-1">
<ul class="org-ul">
<li>Authentication in the Apache web server uses mod<sub>auth</sub><sub>sspi</sub>, which is middleware
</li>
</ul>
<p>
to use Microsoft's NTLM stack for authentication in the Window's encvironment/
</p>
<ul class="org-ul">
<li><b>NTLM:</b> uses a challenege response scheme for authentication
<ol class="org-ol">
<li>The client negotiates a connection to the server
</li>
<li>The server responds with a challenge to identify the client
</li>
<li>The client responds to the challenge with an authentication message, which
is most likely an encrypted or hashed version of a username and password.
</li>
<li>The server responds indicating a success or failure.
</li>
</ol>
</li>
</ul>
</div>
</li>
<li><a id="sec-1-3-2-2" name="sec-1-3-2-2"></a>Ftp Server:<br  /><div class="outline-text-5" id="text-1-3-2-2">
<ul class="org-ul">
<li>Implimented by VSFTPD, which supports virtual users with PAM (pluggable
authentication modules)
<ul class="org-ul">
<li><b>Linux PAM:</b> separates the tasks of authentication into four independent
management groups
<ol class="org-ol">
<li><span class="underline">Account modules</span> check that the specified account is a valid
</li>
</ol>
<p>
authentication target under current conditions. (may include
conditions like account expiration, time of day, and that the user
has access to the requested service)
</p>
<ol class="org-ol">
<li><span class="underline">Authentication modules</span> verify the user's identity, for example
</li>
</ol>
<p>
by requesting and checking a, in this case, password.
</p>
<ol class="org-ol">
<li><span class="underline">Password modules</span> are responsible for updating passwords, and are
</li>
</ol>
<p>
generally coupled to modules in the authentication step. may also be used 
to enforce strong passwords
</p>
<ol class="org-ol">
<li><span class="underline">Session modules</span> define actions that are performed at the
</li>
</ol>
<p>
beginning and end of sessions. A session starts after a user has
authenticated
</p>
</li>
<li>A virtual user is a user login which does not exist as a real login on the
</li>
</ul>
<p>
system in /etc/passwd and /etc/shadow file. Virtual users can therefore be
more secure than real users, because a compromised account can only use the
FTP server but cannot login to system to use other services such as SSH or
SMTP) 
</p>
</li>
</ul>
</div>
</li>
<li><a id="sec-1-3-2-3" name="sec-1-3-2-3"></a>Tftp Server:<br  /><div class="outline-text-5" id="text-1-3-2-3">
<ul class="org-ul">
<li>OpenTFTP server (and TFTP in general)includes no login or access control mechanisms, and thereby provides
no authentication of users. 
<ul class="org-ul">
<li>It is accessible by
</li>
</ul>
<p>
any anonymous user. It does not provide the ability to manipulate what
directory the user has access to, so upon setting up a tftp connection,
the user only has accesss to the contents of the specified directory
</p>
</li>
</ul>
</div>
</li></ol>
</div>
<div id="outline-container-sec-1-3-3" class="outline-4">
<h4 id="sec-1-3-3"><span class="section-number-4">1.3.3</span> Compare &amp; Contrast:</h4>
<div class="outline-text-4" id="text-1-3-3">
<ul class="org-ul">
<li>FTP provides the ability to authenticate, and control what users can access
the server contents, whereas the TFTP server only allows control of what
directory a user has access to
</li>
<li>FTP and TFTP both provide control of what directories a user is able to access
</li>
<li>FTP and TFTP both do not allow remote code execution in the form of shell access
</li>
<li>FTP does allow the user to navigate directories within the space they are
permitted to access 
</li>
<li>Web Server relies on using third party middleware, to take advantage of the 
host's built in authentication scheme.
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> Part 3</h3>
<div class="outline-text-3" id="text-1-4">
<p>
TCP and UDP are the most commonly used protocals on the internet. TCP and UDP 
perform the same task of sending packets. However the main difference is that
TCP guarantees thay all packets will reach the destination in the correct order, 
while UDP does not. TCP is basically the same as UDP except for the fact that 
it does an extra check, so that's why we think the rules between the two are 
compatible
</p>
</div>
</div>

<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> IP Table rules:</h3>
<div class="outline-text-3" id="text-1-5">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">#Delete all default and existing rules</td>
</tr>

<tr>
<td class="left">iptables &#x2013;flush</td>
</tr>

<tr>
<td class="left">#Refuse all inboud traffic default</td>
</tr>

<tr>
<td class="left">iptables -P INPUT DROP</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">#Allow all incoming SSH traffic on default ssh port 22</td>
</tr>

<tr>
<td class="left">iptables -A INPUT -p tcp &#x2013;dport ssh -j ACCEPT</td>
</tr>

<tr>
<td class="left">iptables -A OUTPUT -p tcp &#x2013;sport 22 -j ACCEPT #might not need</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">#Allow outside users to ping servers</td>
</tr>

<tr>
<td class="left">iptables -A INPUT -p icmp &#x2013;icmp-type echo-request -j ACCEPT</td>
</tr>

<tr>
<td class="left">iptables -A OUTPUT -p icmp &#x2013;icmp-type echo-reply -j ACCEPT #might not need</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">#Allow 10.229.*.* to access ftp, default port 21</td>
</tr>

<tr>
<td class="left">iptables -A INPUT -s 10.229.0.0/16 -p tcp &#x2013;dport 21 -j ACCEPT #maybe should</td>
</tr>

<tr>
<td class="left">#Block 10.229.100.96</td>
</tr>

<tr>
<td class="left">iptables -A INPUT -s 10.229.100.96 -p tcp &#x2013;dport 21 -j REJECT</td>
</tr>

<tr>
<td class="left">#Block 10.229.96.*</td>
</tr>

<tr>
<td class="left">iptables -A INPUT -s 10.229.96.0/24 -p tcp &#x2013;dport 21 -j REJECT</td>
</tr>

<tr>
<td class="left">#block group 8 (x+1)</td>
</tr>

<tr>
<td class="left">iptables -A INPUT -s 10.229.8.0 -p tcp &#x2013;dport 21 -j REJECT</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">#outbound</td>
</tr>

<tr>
<td class="left">iptables -A OUTPUT -s 10.229.100.96 -p tcp &#x2013;dport 21 -j REJECT</td>
</tr>

<tr>
<td class="left">iptables -A OUTPUT -s 10.229.96.0/24 -p tcp &#x2013;dport 21 -j REJECT</td>
</tr>

<tr>
<td class="left">iptables -A OUTPUT -s 10.229.8.0 -p tcp &#x2013;dport 21 -j REJECT</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">#Allow 10.229.*.* to access http on ports 8080</td>
</tr>

<tr>
<td class="left">iptables -A INPUT -s 10.229.0.0/16 -p tcp &#x2013;dport 8080 -j ACCEPT</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">#Block 10.229.100.97</td>
</tr>

<tr>
<td class="left">iptables -A INPUT -s 10.229.100.97 -p tcp &#x2013;dport 8080 -j REJECT</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">#Block 10.229.97.*</td>
</tr>

<tr>
<td class="left">iptables -A INPUT -s 10.229.97.0/24 -p tcp &#x2013;dport 8080 -j REJECT</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">#Block group 6 (x-1)</td>
</tr>

<tr>
<td class="left">iptables -A INPUT -s 10.229.6.0 -p tcp &#x2013;dport 8080 -j REJECT</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">#Allow 10.229.*.* to access tftp, default port 69</td>
</tr>

<tr>
<td class="left">iptables -A INPUT -s 10.229.0.0/16 -p udp &#x2013;dport 69 -j ACCEPT</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">#Block 10,229.100.96</td>
</tr>

<tr>
<td class="left">iptables -A INPUT -s 10.229.100.96 -p udp &#x2013;dport 69 -j REJECT</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">#Block 10.229.96.*</td>
</tr>

<tr>
<td class="left">iptables -A INPUT -s 10.229.96.0/24 -p udp &#x2013;dport 69 -j REJECT</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">#block group 9(x+2)</td>
</tr>

<tr>
<td class="left">iptables -A INPUT -s 10.229.9.0 -p udp &#x2013;dport 69 -j REJECT</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
#logging, may have to be slightly changed, following this
<a href="http://stackoverflow.com/questions/21771684/iptables-log-and-drop-in-one">http://stackoverflow.com/questions/21771684/iptables-log-and-drop-in-one</a>-
rule
iptables -N LOGGING
iptables -A INPUT -j LOGGING
iptables -A OUTPUT -j LOGGING
iptables -A LOGGING -m limit &#x2013;limit 2/min -j LOG &#x2013;log-prefix "IPTables-Dropped"
</p>
</div>
</div>
<div id="outline-container-sec-1-6" class="outline-3">
<h3 id="sec-1-6"><span class="section-number-3">1.6</span> Delegation of duties</h3>
<div class="outline-text-3" id="text-1-6">
<ul class="org-ul">
<li>All group members collaborated on all portions of the assignment, however
each member assumed a leadership role/responsibiltiy for the completion of
one portion of the assignment
</li>
<li>Justin was in charge of setting up the web server on the Windows machine,
and had a secondary role configuring ip tables, as well as configuring the
Linux machine to support ip tables
</li>
<li>Vuk was in charge of cracking the passwords for the Assignment 1 sliding
portion, as well as configuring ip tables
</li>
<li>Mackenzie was in charge of setting up the FTP and TFTP servers on the linux
machine, as well as configuring NAT, and port forwarding for the web server
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-7" class="outline-3">
<h3 id="sec-1-7"><span class="section-number-3">1.7</span> Difficulties Encountered</h3>
<div class="outline-text-3" id="text-1-7">
<ul class="org-ul">
<li>Testing the iptables to ensure proper function was difficult to manage
<ul class="org-ul">
<li>In the future, it would be good to have a lab day dedicated to testing
</li>
</ul>
<p>
to make it easy to collaborate with other groups to test eachother's
setups
</p>
</li>
<li>Setting up the Slackware provided TFTP server proved to be impossible, and
the OpenTFTP server had to be installed instead. This also proved somewhat
difficult but not insurmountable
<ul class="org-ul">
<li>In the future, specifically say not to setup the Slackware TFTP server,
</li>
</ul>
<p>
but others did not have the same trouble that Mackenzie did, so perhaps
he is just not very smart 
</p>
</li>
<li>Assignment forced us to learn more about linux permissions, and how
firewalls work
</li>
<li>The assignment took a reasonable amount of effort, but less so than
Assignment 1 
</li>
<li>The workload was reasonable
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-8" class="outline-3">
<h3 id="sec-1-8"><span class="section-number-3">1.8</span> Resources:</h3>
<div class="outline-text-3" id="text-1-8">
<p>
<a href="https://help.ubuntu.com/community/vsftpd">https://help.ubuntu.com/community/vsftpd</a>
<a href="http://docs.slackware.com/">http://docs.slackware.com/</a>
<a href="http://www.m0rd0r.eu/slackware-as-basic-tftp-server/">http://www.m0rd0r.eu/slackware-as-basic-tftp-server/</a>
<a href="https://en.wikipedia.org/wiki/Linux_PAM">https://en.wikipedia.org/wiki/Linux_PAM</a>
<a href="https://en.wikipedia.org/wiki/NT_LAN_Manager">https://en.wikipedia.org/wiki/NT_LAN_Manager</a>
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Justin Barclay</p>
<p class="date">Created: 2016-11-04 Fri 14:59</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 25.1.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
